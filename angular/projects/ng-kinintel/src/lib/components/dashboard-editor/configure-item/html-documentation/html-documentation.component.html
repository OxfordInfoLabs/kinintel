<div class="max-w-3xl mx-auto divide-y-2 divide-gray-200">
  <h2 class="mt-4 text-center text-xl font-extrabold text-gray-900">
    Documentation
  </h2>
  <dl class="mt-6 space-y-6 divide-y divide-gray-200">
    @for (doc of documentation; track doc) {
      <div class="pt-6">
        <dt class="text-lg">
          <!-- Expand/collapse question button -->
          <button type="button" (click)="doc.show = !doc.show"
            class="text-left w-full flex justify-between items-start text-gray-400"
            aria-controls="faq-0" aria-expanded="false">
            <span class="font-medium text-gray-900"> {{doc.title}} </span>
            <span class="ml-6 h-7 flex items-center">
              <svg [class]="{'rotate-0': !doc.show, '-rotate-180': doc.show}"
                class="h-6 w-6 transform" xmlns="http://www.w3.org/2000/svg" fill="none"
                viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
              </svg>
            </span>
          </button>
        </dt>
        @if (doc.show) {
          <dd class="mt-2">
            <p class="text-base text-gray-500">{{doc.description}}</p>
            @for (data of doc.data; track data) {
              <div class="mt-3 mb-2 text-gray-900">{{data.description}}</div>
              <table class="min-w-full divide-y divide-gray-300">
                <thead class="bg-gray-50">
                  <tr>
                    @for (key of Object.keys(data.classes); track key) {
                      <th scope="col" class="p-2 text-left text-sm font-semibold text-gray-900"
                        >
                        {{key}}
                      </th>
                    }
                  </tr>
                </thead>
                <tbody class="divide-y divide-gray-200 bg-white">
                  <tr>
                    @for (key of Object.keys(data.classes); track key; let i = $index) {
                      <td class="p-2 text-sm  "
                        [class]="{'text-gray-900 font-semibold': i === 0, 'text-gray-500': i !== 0}"
                        >
                      {{data.classes[key]}}</td>
                    }
                  </tr>
                </tbody>
              </table>
            }
          </dd>
        }
      </div>
    }
    <!--AVAILABLE DATA FIELDS-->
    <div class="pt-6">
      <dt class="text-lg">
        <!-- Expand/collapse question button -->
        <button type="button" (click)="showData = !showData"
          class="text-left w-full flex justify-between items-start text-gray-400"
          aria-controls="faq-0" aria-expanded="false">
          <span class="font-medium text-gray-900"> Data Access </span>
          <span class="ml-6 h-7 flex items-center">
            <svg [class]="{'rotate-0': !showData, '-rotate-180': showData}"
              class="h-6 w-6 transform" xmlns="http://www.w3.org/2000/svg" fill="none"
              viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
            </svg>
          </span>
        </button>
      </dt>
      @if (showData) {
        <dd class="mt-2">
          <p class="text-base text-gray-500">Access the underlying data via exposed variables.</p>
          <div class="mt-3 mb-2 text-gray-900">Access top level parameters.</div>
          <table class="min-w-full divide-y divide-gray-300">
            <thead class="bg-gray-50">
              <tr>
                <th scope="col" class="p-2 text-left text-sm font-semibold text-gray-900">
                  Variable
                </th>
                <th scope="col" class="p-2 text-left text-sm font-semibold text-gray-900">
                  Notes
                </th>
              </tr>
            </thead>
            <tbody class="divide-y divide-gray-200 bg-white">
              <tr>
                <td class="p-2 text-sm text-gray-900 font-semibold">
                  {{"{{parameterName\}\}"}}
                </td>
                <td class="p-2 text-sm text-gray-500">
                  Access the value of parameters defined in the dataset.
                </td>
              </tr>
            </tbody>
          </table>
          <div class="mt-3 mb-2 text-gray-900">Access the whole dataset.</div>
          <table class="min-w-full divide-y divide-gray-300">
            <thead class="bg-gray-50">
              <tr>
                <th scope="col" class="p-2 text-left text-sm font-semibold text-gray-900">
                  Variable
                </th>
                <th scope="col" class="p-2 text-left text-sm font-semibold text-gray-900">
                  Notes
                </th>
              </tr>
            </thead>
            <tbody class="divide-y divide-gray-200 bg-white">
              <tr>
                <td class="p-2 text-sm text-gray-900 font-semibold">
                  [[dataSet]]
                </td>
                <td class="p-2 text-sm text-gray-500">
                  The whole dataset can be access via the "dataSet" variable
                </td>
              </tr>
            </tbody>
          </table>
          @if (availableColumns && availableColumns.length) {
            <div class="mt-3 mb-2 text-gray-900">Access first row field values</div>
            <table class="min-w-full divide-y divide-gray-300">
              <thead class="bg-gray-50">
                <tr>
                  <th scope="col" class="p-2 text-left text-sm font-semibold text-gray-900">
                    Variable
                  </th>
                  <th scope="col" class="p-2 text-left text-sm font-semibold text-gray-900">
                    Notes
                  </th>
                </tr>
              </thead>
              <tbody class="divide-y divide-gray-200 bg-white">
                @for (column of availableColumns; track column) {
                  <tr>
                    <td class="p-2 text-sm text-gray-900 font-semibold">
                      [[{{column.name}}]]
                    </td>
                    <td class="p-2 text-sm text-gray-500">
                      {{column.title}}
                    </td>
                  </tr>
                }
              </tbody>
            </table>
          }
        </dd>
      }
    </div>
  </dl>
</div>
