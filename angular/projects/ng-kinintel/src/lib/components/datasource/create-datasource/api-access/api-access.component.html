<div class="dialog" cdkDrag cdkDragRootElement=".cdk-overlay-pane">

    <div class="dialog-title" cdkDragHandle>
        <h2 mat-dialog-title>API Access</h2>

        <button mat-icon-button mat-dialog-close>
            <mat-icon>clear</mat-icon>
        </button>
    </div>

    <div class="dialog-content">

        <div class="text-lg font-semibold mb-4">
            Import Key
        </div>

        <div class="mb-4">
            <input class="mt-2 w-full" type="text" [(ngModel)]="datasourceUpdate.instanceImportKey"
                   placeholder="Enter import key">
            <small class="font-normal">This will be used as part of the API request</small>
        </div>


        <div class="text-lg font-semibold mb-4">
            Example API Usage
        </div>

        <div class="relative w-full">
            <div class="text-base font-semibold">Create</div>
            <div class="text-sm mb-2">
                Insert a set of rows to the data source identified by the passed import key
            </div>
            <div #create class=" bg-gray-800 border-2 border-gray-900 text-white rounded-md p-4">
            <pre class="whitespace-normal">
curl -H <span class="text-secondary">"API-KEY:<b>{{apiKeys ? apiKeys.apiKey : '[[apiKey]]'}}</b>"</span> -H <span
                class="text-secondary">"API-SECRET:<b>{{apiKeys ? apiKeys.apiSecret : '[[apiSecret]]'}}</b>"</span></pre>
                <pre class="whitespace-normal">
-X <b>POST</b> <span class="text-secondary">{{backendURL}}/api/tabularData/{{datasourceUpdate.instanceImportKey}}</span></pre>


            </div>
            <button mat-icon-button [cdkCopyToClipboard]="create.textContent" (cdkCopyToClipboardCopied)="copied()"
                    class="text-white absolute bottom-0 right-0">
                <mat-icon>content_copy</mat-icon>
            </button>
        </div>

        <div class="font-semibold text-sm my-1">Example Payload</div>
        <div class="relative bg-gray-800 border-2 border-gray-900 text-white rounded-md p-4 mb-8">
            <pre class="whitespace-normal" [innerHTML]="createExample"></pre>
        </div>

        <div class="relative w-full">
            <div class="text-base font-semibold">Replace</div>
            <div class="text-sm mb-2">
                Replace a set of rows to the data source identified by the passed import key
            </div>
            <div #replace class="relative bg-gray-800 border-2 border-gray-900 text-white rounded-md p-4">
            <pre class="whitespace-normal">
curl -H <span class="text-secondary">"API-KEY:<b>{{apiKeys ? apiKeys.apiKey : '[[apiKey]]'}}</b>"</span> -H <span
                class="text-secondary">"API-SECRET:<b>{{apiKeys ? apiKeys.apiSecret : '[[apiSecret]]'}}</b>"</span></pre>
                <pre class="whitespace-normal">
-X <b>PATCH</b> <span class="text-secondary">{{backendURL}}
                    /api/tabularData/{{datasourceUpdate.instanceImportKey}}</span></pre>


            </div>
            <button mat-icon-button [cdkCopyToClipboard]="replace.textContent"
                    class="text-white absolute bottom-0 right-0">
                <mat-icon>content_copy</mat-icon>
            </button>
        </div>
        <div class="font-semibold text-sm my-1">Example Payload</div>
        <div class="relative bg-gray-800 border-2 border-gray-900 text-white rounded-md p-4 mb-8">
            <pre class="whitespace-normal" [innerHTML]="updateExample"></pre>
        </div>

        <div class="relative w-full">
            <div class="text-base font-semibold">Update</div>
            <div class="text-sm mb-2">
                Update a set of rows to the data source identified by the passed import key
            </div>
            <div #update class="relative bg-gray-800 border-2 border-gray-900 text-white rounded-md p-4">
            <pre class="whitespace-normal">
curl -H <span class="text-secondary">"API-KEY:<b>{{apiKeys ? apiKeys.apiKey : '[[apiKey]]'}}</b>"</span> -H <span
                class="text-secondary">"API-SECRET:<b>{{apiKeys ? apiKeys.apiSecret : '[[apiSecret]]'}}</b>"</span></pre>
                <pre class="whitespace-normal">
-X <b>PUT</b> <span class="text-secondary">{{backendURL}}/api/tabularData/{{datasourceUpdate.instanceImportKey}}</span></pre>


            </div>
            <button mat-icon-button [cdkCopyToClipboard]="update.textContent"
                    class="text-white absolute bottom-0 right-0">
                <mat-icon>content_copy</mat-icon>
            </button>
        </div>
        <div class="font-semibold text-sm my-1">Example Payload</div>
        <div class="relative bg-gray-800 border-2 border-gray-900 text-white rounded-md p-4 mb-8">
            <pre class="whitespace-normal" [innerHTML]="updateExample"></pre>
        </div>

        <div class="relative w-full">
            <div class="text-base font-semibold">Delete</div>
            <div class="text-sm mb-2">
                Delete a set of rows to the data source identified by the passed import key
            </div>
            <div #delete class="relative bg-gray-800 border-2 border-gray-900 text-white rounded-md p-4">
            <pre class="whitespace-normal">
curl -H <span class="text-secondary">"API-KEY:<b>{{apiKeys ? apiKeys.apiKey : '[[apiKey]]'}}</b>"</span> -H <span
                class="text-secondary">"API-SECRET:<b>{{apiKeys ? apiKeys.apiSecret : '[[apiSecret]]'}}</b>"</span></pre>
                <pre class="whitespace-normal">
-X <b>DELETE</b> <span class="text-secondary">{{backendURL}}
                    /api/tabularData/{{datasourceUpdate.instanceImportKey}}</span></pre>


            </div>
            <button mat-icon-button [cdkCopyToClipboard]="delete.textContent"
                    class="text-white absolute bottom-0 right-0">
                <mat-icon>content_copy</mat-icon>
            </button>
        </div>
        <div class="font-semibold text-sm my-1">Example Payload</div>
        <div class="relative bg-gray-800 border-2 border-gray-900 text-white rounded-md p-4 mb-8">
            <pre class="whitespace-normal">
{{'["primary_key_1", "primary_key_2", "primary_key_3"]'}}
            </pre>
        </div>
    </div>

    <div class="dialog-footer">
        <button mat-button mat-dialog-close mat-stroked-button type="button">Close</button>
        <button mat-button mat-flat-button color="primary" type="button" (click)="saveApiAccess()">Save</button>
    </div>

</div>


