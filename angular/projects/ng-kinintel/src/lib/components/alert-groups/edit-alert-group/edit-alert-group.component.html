<div class="container mx-auto max-w-screen-lg">

    <h2>Alert Group</h2>

    <div class="bg-white p-6 content-wrapper">

        <label class="mb-4">
            Name
            <input type="text" [(ngModel)]="alertGroup.title">
        </label>

        <ki-task-time-periods [(taskTimePeriods)]="alertGroup.taskTimePeriods"></ki-task-time-periods>

        <label class="my-4">
            Notification Groups
            <mat-select [(ngModel)]="alertGroup.notificationGroups" multiple [compareWith]="notificationGroupDisplay">
                <mat-option [value]="group" *ngFor="let group of notificationGroups">{{group.name}}</mat-option>
            </mat-select>
        </label>
        <button mat-button color="primary" (click)="createNotificationGroup()">
            <mat-icon>group_add</mat-icon>&nbsp;Create new notification group
        </button>

        <label class="mb-4">
            Notification Title
            <input type="text" [(ngModel)]="alertGroup.notificationTitle">
            <small>Will be used as the subject for the notification</small>
        </label>

        <label class="my-4">
            Notification Prefix Text
            <textarea cols="30" rows="4" [(ngModel)]="alertGroup.notificationPrefixText"></textarea>
            <small>Text to include at the beginning of the notification</small>
        </label>

        <label class="my-4">
            Notification Suffix Text
            <textarea cols="30" rows="4" [(ngModel)]="alertGroup.notificationSuffixText"></textarea>
            <small>Text to include at the end of the notification</small>
        </label>

        <div class="py-4 align-center justify-between">
            <button mat-stroked-button [routerLink]="['/alert-groups']">
                Cancel
            </button>
            <div>
                <button mat-flat-button color="primary" (click)="save()"
                        [disabled]="!alertGroup.title || (!alertGroup.taskTimePeriods || !alertGroup.taskTimePeriods.length) || (!alertGroup.notificationGroups || !alertGroup.notificationGroups.length)">
                    Save Changes
                </button>
            </div>
        </div>

    </div>

</div>
