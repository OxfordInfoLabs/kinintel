<div class="parameter">
  @if (parameter.type !== 'boolean') {
    <p>{{parameter.title}}<span>*</span></p>
  }

  @if (parameter.type === 'text') {
    <input type="text" placeholder="Enter {{parameter.title}}" [(ngModel)]="parameter.value"
      (change)="valueChanged()" (keyup.enter)="applyChanges()" required autofocus>
  }
  @if (parameter.type === 'numeric') {
    <input type="text" placeholder="Enter {{parameter.title}}" [(ngModel)]="parameter.value"
      (change)="valueChanged()" (keyup.enter)="applyChanges()" required autofocus>
  }
  @if (parameter.type === 'date' || parameter.type === 'datetime') {
    <input type="date" placeholder="Enter {{parameter.title}}" [(ngModel)]="parameter.value"
      (change)="valueChanged()" (keyup.enter)="applyChanges()" required autofocus>
  }
  @if (parameter.type === 'boolean') {
    <mat-slide-toggle [(ngModel)]="parameter.value" (ngModelChange)="valueChanged()"
    required>{{parameter.title}}</mat-slide-toggle>
  }

  @if (parameter.type === 'join') {
    <mat-button-toggle-group class="mt-2 mb-2" [(ngModel)]="parameter.selectedType"
      (ngModelChange)="parameter.value = ''">
      @for (joinType of parameter.values; track joinType) {
        @if (joinType.values.length) {
          <mat-button-toggle [value]="joinType.label">
            {{joinType.label}}
          </mat-button-toggle>
        }
      }
    </mat-button-toggle-group>
    <div class="align-center">
      @for (joinType of parameter.values; track joinType) {
        @if (parameter.selectedType === joinType.label) {
          <mat-select [(value)]="parameter.value" class="mr-4">
            <mat-option value="">-- Select {{joinType.label}} --</mat-option>
            @for (field of joinType.values; track field) {
              <mat-option
              [value]="field.name">{{field.title}}</mat-option>
            }
          </mat-select>
        }
      }
    </div>
  }

  @if (parameter.type === 'global') {
    <mat-button-toggle-group class="mt-2 mb-2" [(ngModel)]="parameter.selectedValue">
      <mat-button-toggle value="global">Use Global Parameter</mat-button-toggle>
      <mat-button-toggle value="custom">Use Custom Value</mat-button-toggle>
    </mat-button-toggle-group>
    @if (parameter.selectedValue === 'global') {
      <mat-select [(ngModel)]="parameter.value" class="mr-4" (change)="applyChanges()">
        <mat-option value="">-- Select Value --</mat-option>
        @for (field of parameter.values; track field) {
          <mat-option
          [value]="'{{'+field.name+'}}'">{{field.title}} ({{field.value}})</mat-option>
        }
      </mat-select>
    }
    @if (parameter.selectedValue === 'custom') {
      @if (parameter._prevType === 'text') {
        <input type="text" placeholder="Enter {{parameter.title}}" [(ngModel)]="parameter.value"
          (change)="valueChanged()" (keyup.enter)="applyChanges()" required autofocus>
      }
      @if (parameter._prevType === 'numeric') {
        <input type="number" placeholder="Enter {{parameter.title}}" [(ngModel)]="parameter.value"
          (change)="valueChanged()" (keyup.enter)="applyChanges()" required autofocus>
      }
      @if (parameter._prevType === 'date' || parameter.type === 'datetime') {
        <input type="date" placeholder="Enter {{parameter.title}}" [(ngModel)]="parameter.value"
          (change)="valueChanged()" (keyup.enter)="applyChanges()" required autofocus>
      }
      @if (parameter._prevType === 'boolean') {
        <mat-slide-toggle [(ngModel)]="parameter.value" (ngModelChange)="valueChanged()"
        required>{{parameter.title}}</mat-slide-toggle>
      }
    }
  }
</div>
