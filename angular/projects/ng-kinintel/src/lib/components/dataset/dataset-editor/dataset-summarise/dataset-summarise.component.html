<div class="dialog" cdkDrag cdkDragRootElement=".cdk-overlay-pane">

    <div class="dialog-title" cdkDragHandle>
        <h2 mat-dialog-title>Summarise Data</h2>

        <button mat-icon-button mat-dialog-close>
            <mat-icon>clear</mat-icon>
        </button>
    </div>

    <div class="dialog-content">

        <div class="drop-container" cdkDropListGroup>
            <div class="example-container">
                <h2>Available Columns</h2>

                <div
                    cdkDropList
                    [cdkDropListData]="availableColumns"
                    class="example-list"
                    cdkDropListSortingDisabled
                    (cdkDropListDropped)="drop($event)">
                    <div class="example-box" *ngFor="let item of availableColumns" cdkDrag>{{item.label}}</div>
                </div>
            </div>

            <div class="example-container">
                <h2>Summarise Fields</h2>

                <div
                    cdkDropList
                    [cdkDropListData]="summariseFields"
                    class="example-list"
                    (cdkDropListDropped)="drop($event)">
                    <div class="example-box" *ngFor="let item of summariseFields; let i = index" cdkDrag>
                        {{item.label}}
                        <button mat-icon-button color="warn" (click)="removeListItem(summariseFields, i)">
                            <mat-icon>remove</mat-icon>
                        </button>
                    </div>
                </div>
            </div>

            <div class="example-container">
                <h2>Summarise Expressions</h2>

                <div
                    cdkDropList
                    [cdkDropListData]="summariseExpressions"
                    id="summariseExpressions"
                    class="example-list"
                    (cdkDropListDropped)="drop($event)">
                    <div class="example-box expression" *ngFor="let item of summariseExpressions; let i = index" cdkDrag>
                        <div class="top">
                            <mat-select [(ngModel)]="item.expressionType">
                                <mat-option *ngFor="let type of expressionTypes" [value]="type">{{type}}</mat-option>
                            </mat-select>
                            {{item.label}}

                            <button mat-icon-button color="warn" (click)="removeListItem(summariseExpressions, i)">
                                <mat-icon>remove</mat-icon>
                            </button>
                        </div>
                        <div class="bottom">
                            <span>Custom label</span>
                            <input type="text">
                        </div>
                    </div>
                </div>
            </div>
        </div>


    </div>

    <div class="dialog-footer">
        <button mat-button mat-dialog-close>Cancel</button>

        <button mat-button (click)="applySettings()">Apply Settings</button>
    </div>

</div>


