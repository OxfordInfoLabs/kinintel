<div class="dialog" cdkDrag cdkDragRootElement=".cdk-overlay-pane">

  <div class="dialog-title bg-gray-50" cdkDragHandle>
    <h2 mat-dialog-title>
      Signal API Access
    </h2>

    <button mat-icon-button mat-dialog-close>
      <mat-icon>clear</mat-icon>
    </button>
  </div>

  <div class="dialog-content">

    <div class="relative w-full">
      <div class="text-base font-semibold">cURL</div>
      <div class="text-sm mb-2">
        This is the recommended approach for consuming the API.
      </div>
      <div #createCurl class=" bg-gray-800 border-2 border-gray-900 text-white rounded-md p-4 mb-8">
        <pre class="whitespace-normal">
          curl -H <span class="text-emerald-400">"API-KEY:<b>{{apiKeys ? apiKeys.apiKey : '[[apiKey]]'}}</b>"</span> -H <span class="text-emerald-400">"API-SECRET:<b>{{apiKeys ? apiKeys.apiSecret : '[[apiSecret]]'}}</b>"</span></pre>
          <pre class="whitespace-normal">
            -X <b>GET</b> <span class="text-emerald-400">{{feedUrl}}{{feed.path}}@for (param of feed.exposedParameterNames; track param; let i = $index) {
            {{i === 0 ? '?' : '&'}}{{param}}=<b>[[VALUE]]</b>
          }</span></pre>

        </div>
        <button mat-icon-button (click)="copy(createCurl.textContent)"
          class="text-white absolute bottom-0 right-0">
          <mat-icon>content_copy</mat-icon>
        </button>
      </div>

      <div class="relative w-full">
        <div class="text-base font-semibold">HTTPS</div>
        <div class="text-sm mb-2">
          We recommend only using this for testing the API endpoint.
        </div>
        <div #createHttps class=" bg-gray-800 border-2 border-gray-900 text-white rounded-md p-4"><pre class="whitespace-normal">{{feedUrl}}{{feed.path}}<span class="text-emerald-400">?apiKey=<b>{{apiKeys ? apiKeys.apiKey : '[[apiKey]]'}}</b>&apiSecret=<b>{{apiKeys ? apiKeys.apiSecret : '[[apiSecret]]'}}</b></span>@for (param of feed.exposedParameterNames; track param) {
        <span class="text-emerald-400">&{{param}}=<b>[[VALUE]]</b></span>
      }</pre></div>

      <button mat-icon-button (click)="copy(createHttps.textContent)"
        class="text-white absolute bottom-0 right-0">
        <mat-icon>content_copy</mat-icon>
      </button>
    </div>

    <div class="text-sm my-4">
      <div class="mb-4 font-medium text-base">
        Example request parameters
      </div>

      <div class="mb-4">
        Filtering of the returned data can be effected by supplying parameters of the format <b>filter_COLUMNNAME</b>.  The parameter value can either be
        simply a value for exact match filtering or a value followed by a | and a match type which should be one of the following values:
      </div>
      <table>
        <tr>
          <td>eq</td>
          <td>for an equals match</td>
        </tr>
        <tr>
          <td>neq</td>
          <td>for a not equals match</td>
        </tr>
        <tr>
          <td>null</td>
          <td>for a null match</td>
        </tr>
        <tr>
          <td>notnull</td>
          <td>for a not null match</td>
        </tr>
        <tr>
          <td>gt</td>
          <td>for a greater than match</td>
        </tr>
        <tr>
          <td>lt</td>
          <td>for a less than match</td>
        </tr>
        <tr>
          <td>gte</td>
          <td>for a greater than or equals match</td>
        </tr>
        <tr>
          <td>lte</td>
          <td>for a less than or equals match</td>
        </tr>
        <tr>
          <td>startswith</td>
          <td>for a string starts with match</td>
        </tr>
        <tr>
          <td>endswith</td>
          <td>for a string ends with match</td>
        </tr>
        <tr>
          <td>contains</td>
          <td>or a string contains match</td>
        </tr>
      </table>
      <br><br>
      Results can be sorted by supplying a <b>sort</b> parameter which identifies columns to sort and directions (either asc or desc) using pipe separation
      <br><br>
      By default the first 100 rows will be returned.  Paging can be achieved by supplying
      <b>limit</b> and <b>offset</b> parameters.
    </div>

  </div>

  <div class="dialog-footer">
    <button mat-button mat-dialog-close mat-stroked-button type="button">Close</button>
  </div>

</div>


